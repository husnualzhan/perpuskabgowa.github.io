<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
     <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
     <script src="https://kit.fontawesome.com/26d8d3b5e2.js" crossorigin="anonymous"></script>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <style>
        html {
            scroll-behavior: smooth;
        }
        /* Penambahan Gaya Kinerja untuk mengurangi Glitch */
        .will-change-transform {
            will-change: transform;
        }
        .will-change-contents {
            will-change: contents;
            /* Memaksa elemen untuk di-render oleh GPU, membantu pada transisi fixed/relative */
            transform: translateZ(0); 
            -webkit-font-smoothing: subpixel-antialiased;
        }
    </style>
  </head>
  <body >

    <div class="mx-auto bg-white shadow-xl min-h-[300vh]">
        
        <header class="relative transform" x-data="stickyHeader()"> 
            
            <div
                x-data="{ scrollY: 0, scale: 1}"
                x-init="window.addEventListener('scroll', () => { scrollY = window.scrollY; scale = 1 + (scrollY / 500); })"
                class="relative h-[80dvh] overflow-hidden will-change-transform" 
                >
                <div
                    class="absolute inset-0 bg-cover bg-center transition-transform duration-100 ease-out smooth-behavior will-change-transform"
                    :style="`background-image: url('https://cdn1-production-images-kly.akamaized.net/HKpXUxBZghd83ixhafdGtiB0BiI=/1200x675/smart/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/4228623/original/077659000_1668592687-WhatsApp_Image_2022-11-16_at_15.01.07.jpeg'); transform: scale(${scale});`"
                ></div>

                <div
                    class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black opacity-100"
                ></div>

                <div class="relative z-10 text-white p-12 h-full flex items-center justify-center">
                    <h1 class="text-4xl font-bold text-center">Hero Banner: Zoom Background & Statis Fade</h1>
                </div>
            </div>

            <div 
                x-data="{ open: false }" 
                :class="{ 
                    'fixed top-0 left-0 right-0 mx-auto will-change-contents': $data.isPastHero, 
                    /* ðŸ‘† PERBAIKAN: Tambahkan will-change-contents saat fixed */
                    'relative will-change-contents': !$data.isPastHero,
                    /* ðŸ‘† PERBAIKAN: Tambahkan will-change-contents juga saat relative */
                    'shadow-lg': $data.isPastHero 
                }"  
                class="bg-black text-slate-200 w-full duration-300 transition-all z-50">

                <nav id="navbar" class="px-4 py-8 container xl:max-w-[1200px] mx-auto z-10">
                    
                    <div class="flex justify-between items-center">
                        <a href="#" class="flex justify-center gap-4 text-xl font-bold">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/LOGO-PERPUSNAS.svg/1501px-LOGO-PERPUSNAS.svg.png" alt="" class="h-10 w-10 object-cover">
                            <small class="font-[Epilogue] capitalize">Perpustakaan wilayah <br> Kabupaten gowa</small>
                        </a>

                        <div class="hidden md:flex items-center">
                            <a href="#" class="mx-3 hover:text-indigo-500">Beranda</a>

                            <div x-data="{ openProfil: false }" @click.outside="openProfil = false" class="relative mx-3">
                                <button @click="openProfil = !openProfil" class="hover:text-indigo-500 focus:outline-none flex items-center cursor-pointer">
                                    Profil 
                                    <svg class="w-4 h-4 ml-1 transition-transform duration-200" :class="{'rotate-180': openProfil}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div x-show="openProfil" 
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0 scale-95"
                                        x-transition:enter-end="transform opacity-100 scale-100"
                                        x-transition:leave="transition ease-in duration-75"
                                        x-transition:leave-start="transform opacity-100 scale-100"
                                        x-transition:leave-end="transform opacity-0 scale-95"
                                        class="absolute mt-2 w-48 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-20 left-1/2 transform -translate-x-1/2"> 
                                    <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white" role="menuitem">Sejarah</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white" role="menuitem">Visi & Misi</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white" role="menuitem">Struktur Organisasi</a>
                                    </div>
                                </div>
                            </div>

                            <div x-data="{ openLayanan: false }" @click.outside="openLayanan = false" class="relative mx-3">
                                <button @click="openLayanan = !openLayanan" class="hover:text-indigo-500 focus:outline-none flex items-center cursor-pointer">
                                    Layanan
                                    <svg class="w-4 h-4 ml-1 transition-transform duration-200" :class="{'rotate-180': openLayanan}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div x-show="openLayanan"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0 scale-95"
                                        x-transition:enter-end="transform opacity-100 scale-100"
                                        x-transition:leave="transition ease-in duration-75"
                                        x-transition:leave-start="transform opacity-100 scale-100"
                                        x-transition:leave-end="transform opacity-0 scale-95"
                                        class="absolute mt-2 w-48 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-20 left-1/2 transform -translate-x-1/2"> 
                                    <div class="py-1">
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white">Peminjaman</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white">Keanggotaan</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white">Kunjungan</a>
                                    </div>
                                </div>
                            </div>

                            <div x-data="{ openAktifitas: false }" @click.outside="openAktifitas = false" class="relative mx-3">
                                <button @click="openAktifitas = !openAktifitas" class="hover:text-indigo-500 focus:outline-none flex items-center cursor-pointer">
                                    Aktifitas
                                    <svg class="w-4 h-4 ml-1 transition-transform duration-200" :class="{'rotate-180': openAktifitas}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div x-show="openAktifitas"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0 scale-95"
                                        x-transition:enter-end="transform opacity-100 scale-100"
                                        x-transition:leave="transition ease-in duration-75"
                                        x-transition:leave-start="transform opacity-100 scale-100"
                                        x-transition:leave-end="transform opacity-0 scale-95"
                                        class="absolute mt-2 w-48 rounded-md shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-20 left-1/2 transform -translate-x-1/2"> 
                                    <div class="py-1">
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white">Acara</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-slate-200 hover:bg-gray-700 hover:text-white">Berita</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button @click="open = !open" class="md:hidden focus:outline-none">
                            <svg x-show="!open" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                            <svg x-show="open" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                </nav>

                <div x-show="open" 
                    @click.away="open = false" 
                    x-transition:enter="transition ease-out duration-300"
                    x-transition:enter-start="opacity-0 scale-y-0"
                    x-transition:enter-end="opacity-100 scale-y-100"
                    x-transition:leave="transition ease-in duration-200"
                    x-transition:leave-start="opacity-100 scale-y-100"
                    x-transition:leave-end="opacity-0 scale-y-0"
                    class="md:hidden bg-gray-900 origin-top absolute top-full left-0 right-0 py-2 border-t border-gray-700">
                    
                    <a href="#" class="block px-4 py-2 text-slate-200 hover:bg-gray-800">Beranda</a>

                    <div x-data="{ mobileProfilOpen: false }">
                        <button @click="mobileProfilOpen = !mobileProfilOpen" class="w-full text-left px-4 py-2 text-slate-200 hover:bg-gray-800 flex justify-between items-center">
                            Profil
                            <svg class="w-4 h-4 transition-transform duration-200" :class="{'rotate-180': mobileProfilOpen}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div x-show="mobileProfilOpen" class="pl-8 bg-gray-950">
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Sejarah</a>
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Visi & Misi</a>
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Struktur Organisasi</a>
                        </div>
                    </div>
                    <div x-data="{ mobileLayananOpen: false }">
                        <button @click="mobileLayananOpen = !mobileLayananOpen" class="w-full text-left px-4 py-2 text-slate-200 hover:bg-gray-800 flex justify-between items-center">
                            Layanan
                            <svg class="w-4 h-4 transition-transform duration-200" :class="{'rotate-180': mobileLayananOpen}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div x-show="mobileLayananOpen" class="pl-8 bg-gray-950">
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Peminjaman</a>
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Keanggotaan</a>
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Kunjungan</a>
                            
                        </div>
                    </div>
                    <div x-data="{ mobileAktifitasOpen: false }">
                        <button @click="mobileAktifitasOpen = !mobileAktifitasOpen" class="w-full text-left px-4 py-2 text-slate-200 hover:bg-gray-800 flex justify-between items-center">
                            Aktifitas
                            <svg class="w-4 h-4 transition-transform duration-200" :class="{'rotate-180': mobileAktifitasOpen}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div x-show="mobileAktifitasOpen" class="pl-8 bg-gray-950">
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Acara</a>
                            <a href="#" class="block px-4 py-6 text-sm text-slate-300 hover:bg-gray-800">Berita</a>
                        </div>
                    </div>
                    
                </div>
            </div>
        </header>
        
        <main class="mt-[20vh] mx-auto xl:max-w-[1200px] container">
                 
        </main>

    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('stickyHeader', () => ({
                heroHeight: 0,
                isPastHero: false,
                
                init() {
                    const heroBanner = this.$el.querySelector('div.h-\\[100dvh\\]');
                    if (heroBanner) {
                        this.heroHeight = heroBanner.offsetHeight;
                    } else {
                        this.heroHeight = window.innerHeight; 
                    }
                    
                    window.addEventListener('scroll', () => this.handleScroll());
                    this.handleScroll(); 
                },

                handleScroll() {
                    this.isPastHero = window.scrollY > this.heroHeight;
                }
            }));
        });
    </script>
   
  </body>
</html>